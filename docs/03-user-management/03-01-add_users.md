# 3.1 ユーザー追加の基本

---

## 📖 学習目標

Microsoft 365管理センターを使用した基本的なユーザー追加方法を習得し、小規模組織や緊急時のユーザー作成に対応できるスキルを身につけます。

### 🎯 この節で習得すること

- **ユーザーアカウントの種類**と特徴を理解し、適切な選択ができる
- **Microsoft 365管理センター**での効率的なユーザー追加操作をマスターする
- **ライセンス割り当て**の基本を理解し、適切な設定ができる
- **セキュリティ設定**の重要性を理解し、安全なアカウント作成ができる

### 💼 実務での活用場面

- **緊急対応**: 急遽追加が必要になった新入社員・転校生のアカウント作成
- **小規模組織**: 50名以下の組織での日常的なユーザー管理
- **一時的なアクセス**: 外部講師・ゲストユーザーの短期アカウント作成
- **権限テスト**: 新しい設定やポリシーのテスト用アカウント作成

---

## ⚡ 前提条件

### 必要な権限・環境

- [ ] **Microsoft 365テナント**（試用版または本番環境）
- [ ] **グローバル管理者**または**ユーザー管理者**権限
- [ ] **Microsoft 365管理センター**へのアクセス権
- [ ] **ライセンス在庫**の確認済み

### 事前準備

```markdown
📋 事前チェックリスト
- [ ] 組織のユーザー命名規則の確認
- [ ] 利用可能なライセンス数の確認
- [ ] パスワードポリシーの確認
- [ ] 必要なグループ・権限の事前整理
```

> 💡 **実務ヒント**: 実際の運用では、ユーザー追加前に組織の標準手順書を確認し、命名規則やライセンス割り当てルールを把握しておくことが重要です。

---

## 🔍 ユーザーアカウントの種類と特徴

### 1. **クラウド専用ユーザー**

Microsoft 365でのみ管理されるユーザーアカウントです。

| 特徴 | 詳細 |
|------|------|
| **管理場所** | Microsoft 365管理センター・Microsoft Entra ID |
| **認証方式** | クラウド認証 |
| **適用場面** | 小規模組織、クラウドファーストの環境 |
| **メリット** | シンプルな管理、迅速な設定 |
| **注意点** | オンプレミスとの同期なし |

```powershell
# PowerShellでのクラウド専用ユーザー作成例
New-MgUser -DisplayName "田中 太郎" -UserPrincipalName "tanaka@contoso.com" -PasswordProfile @{Password="TempPass123!"; ForceChangePasswordNextSignIn=$true}
```

### 2. **同期ユーザー（ハイブリッド）**

オンプレミスActive Directoryと同期されるユーザーアカウントです。

| 特徴 | 詳細 |
|------|------|
| **管理場所** | オンプレミスAD（Microsoft Entra Connect経由） |
| **認証方式** | パスワードハッシュ同期・パススルー認証・フェデレーション |
| **適用場面** | 既存AD環境がある中大規模組織 |
| **メリット** | 単一のID管理、既存投資の活用 |
| **注意点** | 同期の複雑性、遅延の可能性 |

> ⚠️ **注意**: 同期ユーザーの場合、Microsoft 365管理センターからの直接作成はできません。オンプレミスADでの作成後、Microsoft Entra Connect経由で同期します。

### 3. **ゲストユーザー**

外部組織のユーザーに一時的なアクセスを提供するアカウントです。

| 特徴 | 詳細 |
|------|------|
| **管理場所** | Microsoft Entra ID（B2Bコラボレーション） |
| **認証方式** | 外部組織のID・Microsoft アカウント・ワンタイムパスコード |
| **適用場面** | 外部講師、パートナー企業、一時的なコラボレーション |
| **メリット** | 低コスト、柔軟なアクセス制御 |
| **注意点** | 機能制限あり、セキュリティ考慮が必要 |

---

## 🖥️ Microsoft 365管理センターでのユーザー追加

### Step 1: 管理センターへのアクセス

1. **Webブラウザ**で [https://admin.microsoft.com](https://admin.microsoft.com) にアクセス
2. **管理者アカウント**でサインイン
3. **左側ナビゲーション**で「ユーザー」→「アクティブなユーザー」をクリック

![Microsoft 365管理センター - ユーザー管理画面](../../assets/images/screenshots/admin-center/users-active-users.png)

### Step 2: 新規ユーザーの追加

1. **「ユーザーの追加」**ボタンをクリック
2. **基本情報**を入力：

```markdown
📝 基本情報の入力項目
- 名前（姓・名）: 日本語・英語両方の入力を推奨
- 表示名: 組織内での表示名（通常は姓名の組み合わせ）
- ユーザー名: メールアドレスの@マーク前の部分
- ドメイン: 組織のドメインを選択
```

**入力例**:
- **姓**: 田中
- **名**: 太郎
- **表示名**: 田中 太郎
- **ユーザー名**: t.tanaka
- **ドメイン**: @school.edu.jp

### Step 3: パスワード設定

初期パスワードの設定方法を選択します：

#### オプション A: 自動生成パスワード（推奨）

```markdown
✅ 自動生成パスワードの利点
- 強力なパスワードの自動生成
- 人為的なミスの削減
- セキュリティポリシーへの自動準拠
```

#### オプション B: 手動設定パスワード

```markdown
⚠️ 手動設定時の注意点
- 最低8文字以上
- 大文字・小文字・数字・記号の組み合わせ
- 組織のパスワードポリシーへの準拠
- 辞書に載っている単語の回避
```

**推奨設定**:
- ☑️ **ユーザーは初回サインイン時にパスワードを変更する必要があります**

> 💡 **セキュリティベストプラクティス**: 初回サインイン時のパスワード変更を必須にすることで、管理者が初期パスワードを知っている状態を解消し、セキュリティを向上させます。

### Step 4: 製品ライセンスの割り当て

1. **「製品ライセンス」**セクションで使用可能なライセンスを確認
2. **適切なライセンス**を選択してチェック
3. **アプリとサービス**で必要な機能を選択

#### 主要ライセンスと特徴

| ライセンス | 主な機能 | 推奨対象 |
|------------|----------|----------|
| **Microsoft 365 A1** | 基本的なOfficeアプリ（Web版） | 学生・生徒 |
| **Microsoft 365 A3** | デスクトップOffice + 高度なセキュリティ | 教職員・管理職 |
| **Microsoft 365 Business Basic** | Web版Office + Teams | 基本ユーザー |
| **Microsoft 365 Business Standard** | デスクトップOffice + Teams | 一般的なビジネスユーザー |

### Step 5: オプション設定

#### プロファイル情報（任意）

```markdown
📋 設定可能なプロファイル情報
- 役職: 組織内での役割
- 部署: 所属部署名
- 勤務先の電話番号: 業務用連絡先
- 勤務先住所: 組織の住所
- マネージャー: 上司の設定
```

#### グループメンバーシップ（推奨）

- **セキュリティグループ**: 権限管理用
- **Microsoft 365グループ**: コラボレーション用
- **配布リスト**: メール配信用

> 💡 **運用ヒント**: ユーザー作成時に適切なグループに追加することで、後の権限管理が大幅に簡素化されます。

### Step 6: 確認と作成

1. **入力内容の最終確認**
2. **「追加を完了」**ボタンをクリック
3. **結果画面**でユーザー情報とパスワードを確認
4. **重要**: 初期パスワードを安全な方法でユーザーに伝達

---

## 🔐 セキュリティ設定のベストプラクティス

### 初期セキュリティ設定

#### 1. 多要素認証（MFA）の有効化

```markdown
🔒 MFA設定手順
1. Microsoft Entra 管理センターにアクセス
2. 「ユーザー」→「すべてのユーザー」
3. 対象ユーザーを選択
4. 「認証方法」→「多要素認証の状態」を有効化
```

#### 2. 条件付きアクセスの適用

基本的な条件付きアクセスポリシーの例：

```json
{
  "displayName": "新規ユーザー向け基本ポリシー",
  "conditions": {
    "users": {
      "includeUsers": ["新規ユーザーグループ"]
    },
    "locations": {
      "excludeLocations": ["信頼できる場所"]
    }
  },
  "grantControls": {
    "requireMfa": true,
    "requireCompliantDevice": true
  }
}
```

#### 3. アカウントロックアウト保護

- **不審なサインイン活動の監視**
- **Identity Protection**の活用
- **リスクベース認証**の導入

### パスワード管理のベストプラクティス

```markdown
🛡️ 強固なパスワード要件
- 最小文字数: 8文字以上（推奨12文字以上）
- 複雑性: 大文字・小文字・数字・記号の組み合わせ
- 有効期限: 90日または無期限（最新のガイダンス）
- 履歴: 過去24回分のパスワードを記憶
- アカウントロックアウト: 5回の失敗で30分間ロック
```

---

## 🧪 実習演習: テストユーザーの作成

### 演習1: 基本的なユーザー作成（15分）

以下の要件でテストユーザーを作成してください：

```markdown
👨‍🎓 学生ユーザー（佐藤 花子）
- 表示名: 佐藤 花子
- ユーザー名: h.sato
- 部署: 情報科学部
- ライセンス: Microsoft 365 A1
- グループ: Students（事前作成済み）
```

#### 手順

1. **Microsoft 365管理センター**にアクセス
2. 上記要件に従ってユーザーを作成
3. **初期パスワード**を記録
4. **MFA**を有効化

#### 確認事項

- [ ] ユーザーが正常に作成された
- [ ] ライセンスが正しく割り当てられた
- [ ] MFAが有効になっている
- [ ] 適切なグループに追加された

### 演習2: 教職員ユーザーの作成（20分）

```markdown
👨‍🏫 教職員ユーザー（山田 一郎）
- 表示名: 山田 一郎
- ユーザー名: i.yamada
- 役職: 准教授
- 部署: 数学科
- マネージャー: 田中部長（事前作成済み）
- ライセンス: Microsoft 365 A3
- グループ: Faculty, Mathematics-Dept
```

### 演習3: ゲストユーザーの招待（10分）

外部講師用のゲストアカウントを作成：

```markdown
🎯 外部講師（guest.lecturer@external-univ.ac.jp）
- 招待理由: 特別講義のため
- アクセス期間: 1ヶ月限定
- 権限: 特定Teams会議への参加のみ
```

---

## 🛠️ トラブルシューティング

### よくある問題と解決方法

#### 問題1: ユーザー名が既に使用されている

**症状**: ユーザー作成時に「このユーザー名は既に使用されています」エラー

**解決方法**:
```markdown
🔧 対処手順
1. 削除済みユーザーの確認
   - 管理センター→「ユーザー」→「削除済みユーザー」
2. 完全削除の実行
   - 対象ユーザーを選択→「完全に削除」
3. 代替ユーザー名の検討
   - middle initial の追加: t.tanaka → t.k.tanaka
   - 部署コードの追加: t.tanaka → t.tanaka.math
```

#### 問題2: ライセンス割り当てに失敗

**症状**: 「利用可能なライセンスがありません」エラー

**解決方法**:
```powershell
# ライセンス使用状況の確認
Get-MgSubscribedSku | Select-Object SkuPartNumber, ConsumedUnits, PrepaidUnits

# 未使用ライセンスの確認
Get-MgUser -All | Where-Object {$_.AssignedLicenses.Count -eq 0}
```

#### 問題3: パスワード複雑性エラー

**症状**: パスワードが組織のポリシーを満たしていない

**解決方法**:
```markdown
✅ パスワード要件チェック
- [ ] 最小8文字以上
- [ ] 大文字を含む（A-Z）
- [ ] 小文字を含む（a-z）
- [ ] 数字を含む（0-9）
- [ ] 特殊文字を含む（!@#$%など）
- [ ] ユーザー名を含まない
- [ ] 一般的な単語ではない
```

#### 問題4: MFA設定が反映されない

**症状**: MFAを有効にしたがユーザーにプロンプトが表示されない

**解決方法**:
```markdown
🔍 確認手順
1. ポリシーの適用範囲確認
2. ユーザーグループメンバーシップ確認
3. 条件付きアクセスポリシーとの競合確認
4. サインインログの確認
```

### PowerShellでのトラブルシューティング

```powershell
# Microsoft Graph PowerShell接続
Connect-MgGraph -Scopes "User.ReadWrite.All", "Group.ReadWrite.All"

# ユーザー作成状況の確認
Get-MgUser -Filter "startswith(displayName,'田中')" | Select-Object DisplayName, UserPrincipalName, AccountEnabled

# ライセンス割り当て状況の確認
Get-MgUser -UserId "t.tanaka@contoso.com" | Select-Object -ExpandProperty AssignedLicenses

# グループメンバーシップの確認
Get-MgUserMemberOf -UserId "t.tanaka@contoso.com" | Select-Object DisplayName, GroupTypes
```

---

## 📊 運用上のヒントとベストプラクティス

### 効率的なユーザー作成のコツ

1. **テンプレート化**
   - 部署・役職ごとのユーザー作成テンプレート
   - 標準的なグループ割り当てパターン
   - ライセンス割り当てマトリックス

2. **命名規則の統一**
   ```markdown
   📝 推奨命名パターン
   - 一般ユーザー: first.last (例: taro.tanaka)
   - 共有アカウント: service-purpose (例: service-reception)
   - 管理アカウント: admin-purpose (例: admin-backup)
   ```

3. **権限の最小化**
   - 必要最小限の権限から開始
   - 段階的な権限昇格
   - 定期的な権限見直し

### 文書化とコミュニケーション

```markdown
📋 新規ユーザー作成チェックリスト
- [ ] 事前申請・承認の確認
- [ ] 命名規則に従ったユーザー名生成
- [ ] 適切なライセンス選択
- [ ] 必要なグループへの追加
- [ ] セキュリティ設定の適用
- [ ] 初期パスワードの安全な伝達
- [ ] ユーザーへのオリエンテーション資料送付
- [ ] 作成完了の関係者への通知
```

### 監査とガバナンス

```powershell
# 新規ユーザー作成レポート（過去30日）
$StartDate = (Get-Date).AddDays(-30)
Get-MgAuditLogDirectoryAudit -Filter "activityDateTime ge $StartDate and category eq 'UserManagement'" |
Where-Object {$_.ActivityDisplayName -eq "Add user"} |
Select-Object ActivityDateTime, InitiatedBy, TargetResources
```

---

## ✅ 学習成果の確認

### 習得スキルチェック

以下の項目について、実際に操作できることを確認してください：

- [ ] **基本操作**: Microsoft 365管理センターでのユーザー作成
- [ ] **ライセンス管理**: 適切なライセンス選択と割り当て
- [ ] **セキュリティ設定**: MFA有効化と基本的なセキュリティ設定
- [ ] **グループ管理**: 作成時のグループ割り当て
- [ ] **トラブル対応**: 一般的な問題の診断と解決

### 実践課題

実際の業務を想定した課題に取り組んでください：

```markdown
🎯 実践課題: 新年度対応シミュレーション
新年度に向けて以下のユーザーを作成してください：

1. 新入生 5名（A1ライセンス）
2. 新任教員 2名（A3ライセンス）
3. 非常勤講師 1名（ゲストアカウント）

要件:
- 適切な命名規則の適用
- セキュリティ設定の統一
- グループ割り当ての自動化
- 作成プロセスの文書化
```

---

## 🚀 次のステップ

この節を完了したら、次の学習に進みましょう：

### 推奨学習パス

1. **[3.2 一括ユーザー追加](02-bulk-users.md)**
   - CSVを使用した効率的な大量ユーザー作成
   - PowerShellによる自動化技術

2. **[3.3 ユーザーグループの管理](03-groups.md)**
   - 効率的な権限管理のためのグループ戦略
   - 動的グループの活用

<!-- 3. **[第4章: ライセンス管理](../04-license-management/)** -->
- より詳細なライセンス管理手法
- コスト最適化戦略

### 発展学習

- **Microsoft Graph API**: プログラマティックなユーザー管理
- **PowerShell Desired State Configuration**: 設定の自動化
- **Azure Logic Apps**: ワークフローの自動化

---

## 📚 参考リソース

### Microsoft公式ドキュメント

- [Microsoft 365でユーザーを追加する](https://docs.microsoft.com/ja-jp/microsoft-365/admin/add-users/add-users)
- [Microsoft Entra ID でのユーザー管理](https://docs.microsoft.com/ja-jp/azure/active-directory/fundamentals/add-users-azure-active-directory)
- [Microsoft 365 のライセンス](https://docs.microsoft.com/ja-jp/microsoft-365/commerce/licenses/subscriptions-and-licenses)

### 関連ツール・テンプレート

<!-- - [ユーザー作成チェックリスト](../../appendices/checklists/user-creation-checklist.md) -->
<!-- - [パスワードポリシーテンプレート](../../appendices/templates/password-policy-template.md) -->
<!-- - [PowerShell管理スクリプト](../../appendices/powershell-commands.md#基本ユーザー管理) -->

---

*📅 最終更新: 2025年6月1日*  
*✍️ 更新者: Microsoft 365 ハンドブック編集チーム*  
*📖 対象バージョン: Microsoft 365 (2025年6月版)*